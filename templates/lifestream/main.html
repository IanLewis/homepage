{% extends "lifestream/item_list.html" %}
{% load utility_tags %}
{% load lifestream_tags %}
{% load pagination_tags %}
{% load tagging_tags %}
{% load blog_tags %}

{% block title %}{% ifnotequal request.page 1 %}Page {{ request.page }}{% else %}Homepage{% endifnotequal %}{% endblock %}

{% block extra_header %}
{% if latest_tweet %}
<div class="latest-tweet">
  <div class="twitter-com-speech-tail-top"></div>
  <p>
    {{ latest_tweet.content|safe|urlizetrunc:50|urlize_twitter }}
  </p>
  <div class="profile-link"><a href="{% url lifestream_domain_page "twitter.com" %}">More</a></div>
</div>
{% endif %}
{% endblock %}

{% block top_content %}
{% ifequal request.page 1 %}
<div class="blog-links">
  {% if en_post %}
  <div class="english-blog blog-link" 
       onclick="window.location='{% url blog_page "en" %}';"
       onmouseover="$(this).addClass('over');"
       onmouseout="$(this).removeClass('over');"
  >
    {% if en_post %}
      <div class="blog-title">English Blog</div>
      <div class="blog-link-title">{{ en_post.title }}</div>
      <div class="blog-link-content">{{ en_post|to_html|striptags|truncate_chars:80|safe }}</div>
    {% endif %}
    <div class="more">Read More</div>
  </div>
  {% endif %}

  {% if jp_post %}
  <div class="japanese-blog blog-link"
       onclick="window.location='{% url blog_page "jp" %}';"
       onmouseover="$(this).addClass('over');"
       onmouseout="$(this).removeClass('over');"
  >
    {% if jp_post %}
      <div class="blog-title">日本語ブログ</div>
      <div class="blog-link-title">{{ jp_post.title }}</div>
      <div class="blog-link-content">{{ jp_post|to_html|striptags|truncate_chars:60|safe }}</div>
    {% endif %}
    <div class="more">もっと見る</div>
  </div>
  {% endif %}
</div>
{% endifequal %}
{% endblock %}
