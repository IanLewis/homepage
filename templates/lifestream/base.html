{% extends "base.html" %}
{% block js_footer %}
{{ block.super }}
<script type="text/javascript" src="{{ STATIC_URL }}lib/jquery/jqModal-r14.js"></script>
<script type="text/javascript">
$(function() {
  windows = $('div.jqmWindow');
  if (windows.length) {
    windows.jqm();
    $('a.modal').each(function() {
      $(this).attr('href','javascript:void(0);').click(function() {
        $("#"+$(this).attr('rel')).jqmShow();
      });
    });
    $('a.modal-close').click(function() {
      $("#"+$(this).attr('rel')).jqmHide();
    });
  }

  var imgfix = function() {
    var img = $(this);
    var w = img.width();
    var extra = -1 * (w - 214)/2;
    img.css("left", extra+"px");
  };

  // Run imgfix right away since load may not work for cached images.
  // Also run it when the load() event is fired. May not work reliably
  // but it's better than nothing for now.
  $("div.lifestream-item-inner.flickr-com img").each(imgfix).load(imgfix);
});
</script>
{% endblock %}

{% block header_right %}
<form class="search-box" action="{% url lifestream_item_search %}">
  <input type="text" name="q" value="{{ keywords }}" />
  <button id="search-button" name="search" type="submit">
    <span>Search</span>
  </button> 
</form>
{% endblock %}

{% block content %}
<div id="lifestream">
  {% block lifestream_content %}{% endblock %}
</div>
{% endblock %}
