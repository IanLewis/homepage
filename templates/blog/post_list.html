{% extends "blog/base.html" %}
{% load utility_tags %}
{% load pagination_tags %}
{% load tagging_tags %}
{% load blog_tags %}
{% load disqus_tags %}

{% block title %}Ian's Blog{% endblock %}

{% block rss %}
{% if rss_feed_url %}
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="{{ rss_feed_url }}" />
{% endif %}
{% endblock %}

{% block blog_content %}
  {% autopaginate object_list 10 %}

  {% if object_list %}
    <ul>
    {% for item in object_list %}
      {% tags_for_object item as item_tags %}
      <li class="blog-post">
        <h1 class="post-title"><a href="{{ item.get_absolute_url }}">{{ item.title|safe }}</a></h1>
        <div class="post-date">{{ item.pub_date }}</div>
        <div class="post-tags">{% for tag in item_tags %}<a href="{% url blog_tag_page locale tag.name %}">{{ tag.name }}</a> {% endfor %}</div>
        <div class="post-body">
        {% if item.content %}
          {{ item|to_html|safe }}
        {% else %}
          &nbsp;
        {% endif %}
        </div>
        <div class="post-comment-link">
          <a class="disqus-link" href="{{ item.get_absolute_url }}#disqus_thread">Send feedback</a>
          &nbsp;
          <g:plusone size="medium" annotation="none" href="http://www.ianlewis.org/"></g:plusone>
          <a href="http://twitter.com/share" class="twitter-share-button" data-text="{{ item.title }}" data-url="{{ item.get_full_url }}" data-count="horizontal" data-via="IanMLewis" data-lang="{{ item.lang }}">Tweet</a>
          <a href="http://b.hatena.ne.jp/entry/{{ item.get_full_url }}" class="hatena-bookmark-button" data-hatena-bookmark-title="{{ item.title }}" data-hatena-bookmark-layout="standard" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
        </div>
        <div class="clear"></div>
      </li>
    {% endfor %}
    </ul>
  {% endif %}
<br/>

{% paginate %}

{% endblock %}

{% block js_footer %}
{{ block.super }}
{% disqus_num_replies %}
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
{% endblock %}

{% block footer %}
<div class="tag-cloud">
{% tag_cloud_for_model blog.post as post_tags with steps=20 min_count=4 distribution=log %}
{% for post_tag in post_tags %}
<a style="font-size: {{ post_tag.font_size|add:"10" }}px;" href="{% url blog_tag_page locale post_tag.name %}">{{ post_tag.name }}</a>&nbsp;&nbsp;
{% endfor %}
</div>
{% endblock %}


